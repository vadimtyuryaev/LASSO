- name: Convert notebooks to HTML (no execution)
  run: |
    mkdir -p site
    find src/notebooks -name "*.ipynb" -print0 | while IFS= read -r -d '' nb; do
      jupyter nbconvert --to html --output-dir site "$nb"
    done
    echo "<!doctype html><meta charset='utf-8'><title>Notebooks</title><h1>Published Notebooks</h1><ul>" > site/index.html
    for f in site/*.html; do
      b=$(basename "$f"); [ "$b" = "index.html" ] && continue
      echo "<li><a href='$b'>$b</a></li>" >> site/index.html
    done
    echo "</ul>" >> site/index.html
